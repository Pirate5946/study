三月主要过一遍导入导出，sqlplus命令，sql笔记整理

数据库：        
	1、存储数据和相关对象的数据文件     
	2、实例：一系列操作系统进程及其管理的内存区
	
Oracle操作数据实际上是对不同级别的逻辑单元进行维护和管理的过程

10:38 2016/3/25

lsnrctl status    查看监听状态

sqlplus 用户名/密码@ip:port/servie_name	远程简易连接

### p474  16章、体系结构之数据库结构
查询数据库控制文件          
	1、查询初始化参数CONTROL_FILES   SHOW PARAMETER CONTROL_FILES;   
	2、通过动态性能视图 select name from V$CONTROLFILE;
	
数据文件有多种状态：联机，脱机，SYSTEM
查看文件状态视图：  
	1、select  * from V$DATAFILE    
	2、select * from DBA_DATA_FILES    
	
临时文件    
联机重做日志文件组，联机重做日志文件 V$log ；V$logfile   
	如果数据修改频繁，文件不能太小，如果文件尚未归档写满了，实例会暂停等待；文件也不能太大
	
数据库在日志归档模式下会自动将重做日志写入数据文件；alter system archive log all，不管是否写满手动归档

### p485 逻辑存储结构
- 1、块BLOCK	块是逻辑存储结构中最小的存储单元，块大小在数据库创建是指定，无法修改	
- 2、区EXTENT	区是最小的分配单位，由一组逻辑上连续的块组成，存在于同一物理文件
- 3、段SEGMENT	段由一个或多个区组成，一个表对应一个段，索引存在于索引段，LOB存入单独数据段
- 4、表空间Tablespace	由一个或多个段组成，物理结构上对应一个或多个数据文件，表空间是Oracle空间分配中最大的逻辑单位，平常操作都是在表空间一级进行

### 数据块空间管理 p488
- 1、PCTFREE    降低行迁移（数据块更新空间不够），减轻查询负载；行链接（数据块空间满）
- 2、PCTUSED
#### 数据区管理：	
通过数据字典查询区的分配情况，视图 user/extents；
	数据库在为区分配空间时，会在表空间对应的数据文件总寻找连续的数据块，如果数据文件没有连续块，    表空间不能自动扩展则会报空间不足。
#### 数据段管理： p495
Oracle创建存储对象时，首先分配的是段，一个对象拥有一个或多个不同类型的段（数据段、索引段。。  。），数据字典为user_segments
	常见的段：数据段，索引段，回滚段，临时段
#### 表空间管理
数据库最大的逻辑存储单位，直接与物理结构文件相关联，查询视图V$tablespace，dba_tablespaces   

- SYSTEM表空间：保存数据字典（DBA_*,USER_*,ALL_*），PL/SQL源码，对象的定义（表结构，视图定义  ，同义词），不能被删除，最好不要创建与数据库运行无关的对象
- SYSAUX表空间，SYSTEM表空间的辅助表空间，保存Oracle自身的一些属性
- UNDO表空间，保存UNDO数据，只能创建UNDO段，一般一个实例只需创建一个UNDO表空间，查询方  式 show parameter undo_tablespace;
- 临时表空间，存储临时对象，如sql排序中的中间结果，查看实际使用情况：select block*块大小  from V  $sort_usage,
表空间状态：脱机，联机，只读，读写

常用操作：创建表空间，增加数据文件，修改表空间，修改存储属性

### p501	17章、体系结构之实例结构
  数据库是指Oracle保存数据的一系列物理结构与逻辑结构和实例，物理文件是数据存储的实际位置，如何存储，以什么结构存储取决于取决于逻辑存储结构
  
  用户访问Oracle主要是在与实例打交道，由实例访问数据库，并返回相应的操作结果

实例由内存结构与进程结构两部分组成

实例中的内存结构主要包括SGA,PGA，UGA
  SGA是一组主要用来缓存数据及控制信息的内存结构，大部分信息都是共享存在，所有连接到实例的进程都能访问到，其组成主要分为几个不同的池：共享池，Java池，大池，流池，数据缓冲区，重做日志缓冲区
  
在内存中操作数据比在磁盘中快很多
- 共享池（shared pool）：
- Java池：
- 大池（large pool）：
- 流池（streams pool）：
- 数据缓冲区（database buffer cache）：
- 重做日志缓冲区（redolog buffer）：
- 
通过设置初始化参数设置各部分的内存空间
SGA_TARGET:控制SGA自动内存管理

SGA_MAX_SIZE:控制实例运行时SGA最大能使用的内存空间

####  p509数据缓冲区的大小设置
  P510共享池管理：库缓存和数据字典缓存占共享池的绝大部分资源
尽可能保证执行的语句能够被重用，（软解析，利用库缓存中存储的SQL语句执行计划执行；硬解析，没有找到，就必须重新解析）
  p516PGA组成结构
	
	

























